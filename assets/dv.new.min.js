!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var o=n(3),r=n(1);r.load(function(e){var t=o("POST","/tips/new");t.setValidate("title",/^\s*$/),t.setValidate("editor",function(e){var t=document.createElement("div");return t.innerHTML=e.getData(),!/^\s*$/.test(t.textContent)}),t.onSuccess=function(){setTimeout(function(){window.location.pathname="/tips"},1e3)}})},function(e,t,n){e.exports={load:function(e){document.addEventListener("DOMContentLoaded",e)},ajax:function(e,t,n,o){var r=new XMLHttpRequest;return r.open(e,t),r.onload=n,r.onerror=o,r.timeout=5e3,{send:function(e){r.send(e)}}}}},function(e,t,n){var o=n(4);e.exports=function(e){return o.replace(e),o.instances[e]}},function(e,t,n){var o=document.getElementById("tipform"),r=o.querySelector("button"),a=document.querySelector(".attlist"),i=document.getElementById("new_tip_errmsg"),c=document.querySelector(".backdrop"),u=n(5),l=n(2)("content");u.onAppendFile=function(e){[].forEach.call(e,function(e,t){var n=document.createElement("div");n.className="att";var o=document.createElement("span");o.className="content",o.textContent=e.name,n.appendChild(o);var r=document.createElement("span");r.className="glyphicon glyphicon-remove",r.onclick=function(){n.remove(),u.files.splice(u.files.indexOf(e),1)},n.appendChild(r),a.appendChild(n)})},e.exports=function(e,t){var n={},a={editor:l},d={onSubmit:null,beforeSubmit:function(){return!0},onSuccess:null,onError:null,setValidate:function(e,t){if("RegExp"===t.constructor.name){var o=t;t=function(e){return!o.test(e.value)}}n[e]=t},setErrorMessage:function(e){i.textContent=e}};return r.addEventListener("click",function(e){e.preventDefault();var t=[];for(var r in n)if(n.hasOwnProperty(r)){var s=document.getElementsByName(r)[0]||document.getElementById(r)||a[r];s&&!n[r].call(null,s)&&t.push(r)}if(t.length>0)return void(i.textContent="Required fields should be filled: "+t.join(", "));c.style.display="block";var f=new FormData(o);f.append("content",l.getData()),[].forEach.call(u.files,function(e,t){f.append("file"+t,e)});var p=new XMLHttpRequest;p.open("POST","/tips/new"),p.onload=function(){d.onSuccess.call()},p.onerror=function(){c.style.display="none";try{var e=JSON.parse(p.response);i.textContent=e.message}catch(t){i.textContent="Unkown error."}},p.timeout=5e3,p.send(f)}),d}},function(e,t,n){e.exports=CKEDITOR},function(e,t,n){var o=e.exports={files:[],onAppendFile:null},r=document.getElementById("uploader"),a=document.querySelector(".dropbox .inner-box"),i=document.querySelector(".file-select .cross");a.addEventListener("dragover",function(e){e.preventDefault()});var c=0;a.addEventListener("dragenter",function(e){c++,a.classList.add("active")}),a.addEventListener("dragleave",function(e){c--,c||a.classList.remove("active")}),a.addEventListener("drop",function(e){e.preventDefault(),c=0,a.classList.remove("active");var t=e.dataTransfer;t.files&&t.files.length>0&&([].push.apply(o.files,t.files),o.onAppendFile&&o.onAppendFile.call(null,t.files))}),i.addEventListener("click",function(){r.click()}),r.addEventListener("change",function(e){[].push.apply(o.files,r.files),o.onAppendFile&&o.onAppendFile.call(null,r.files)})}]);
//# sourceMappingURL=dv.new.min.js.map