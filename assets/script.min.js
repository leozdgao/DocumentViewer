document.addEventListener("DOMContentLoaded",function(e){function t(e){var t=!0;return[].forEach.call(e,function(e){e.value||(e.parentElement.classList.add("has-error"),t=!1)}),t}function n(e){[].forEach.call(e,function(e,t){var n=document.createElement("div");n.className="att";var a=document.createElement("span");a.className="content",a.textContent=e.name,n.appendChild(a);var c=document.createElement("span");c.className="glyphicon glyphicon-remove",c.onclick=function(){n.remove(),u.splice(u.indexOf(e),1)},n.appendChild(c),l.appendChild(n)})}var a=document.getElementById("tipform"),c=a.querySelector("button"),o=document.getElementById("uploader"),r=document.querySelector(".dropbox .inner-box"),i=document.querySelector(".file-select .cross"),l=document.querySelector(".attlist"),d=document.querySelector(".backdrop");r.addEventListener("dragover",function(e){e.preventDefault()});var s=0;r.addEventListener("dragenter",function(e){s++,r.classList.add("active")}),r.addEventListener("dragleave",function(e){s--,s||r.classList.remove("active")});var u=[];r.addEventListener("drop",function(e){e.preventDefault(),s=0,r.classList.remove("active");var t=e.dataTransfer;t.files&&t.files.length>0&&([].push.apply(u,t.files),n(t.files))}),i.addEventListener("click",function(){o.click()}),o.addEventListener("change",function(e){[].push.apply(u,o.files),n(o.files)}),c.addEventListener("click",function(e){e.preventDefault();var n=document.getElementById("title"),c=document.getElementById("content");if(t([n,c])){d.style.display="block";var o=new FormData(a);[].forEach.call(u,function(e,t){o.append("file"+t,e)});var r=new XMLHttpRequest;r.open("POST","/tips/new"),r.onload=function(){setTimeout(function(){window.location.pathname="/tips"},2e3)},r.onerror=function(){},r.timeout=5e3,r.send(o)}}),a.addEventListener("keyup",function(e){var t=e.srcElement||e.target;t.value&&t.parentElement.classList.remove("has-error")})});